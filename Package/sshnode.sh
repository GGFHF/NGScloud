#!/bin/bash

#-------------------------------------------------------------------------------

# -- set -o nounset
# -- set -o verbose
# -- set -o xtrace

#--------------------------------------------------------------------------------

export STARCLUSTER_CONFIG="./config/"$1"-ngscloud-config.txt"

#-------------------------------------------------------------------------------

function end
{

    exit 0

}

#-------------------------------------------------------------------------------

function manage_error
{

    if [ $1 == '2' ]; then
        echo "*** ERROR: StarCluster has ended with return code $2."
        exit 1
    fi

}

#--------------------------------------------------------------------------------

starcluster sshnode $2 $3
RC=$?; [ $RC -ne 0 ] && manage_error 1 $RC

end

#-------------------------------------------------------------------------------
